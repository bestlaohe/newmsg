
+--------------------------------+
|                          |     |     <- 电量显示（右上角 16x8）
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|       聊天窗口           |     |     <- 聊天窗口（中间 120x100）
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|                          |     |
|--------------------------|     |
|         输入框           |     |     <- 输入框（底部 120x16）
+--------------------------------+





一格就是一圈来0,1区分正反转，





帮我用***来画一个128*128的tft彩屏的主界面的ui布局，这个界面右上角具有电量显示，中间是聊天窗口，最底下是输入框


聊天窗口交互:

滚轮上滚：切换字母
滚轮下滚：删除一个字母
短按按钮：确认输入的字母
按住并上滚：发送消息
按住并下滚：删除最后一条消息
长按按钮：切换到设置页面


设置页面交互:
滚轮上下滚动：切换设置选项
短按按钮：确认选择的设置
滚轮上下滚动：选择切换的档位
长按按钮：返回聊天窗口


亮度，震动模式，lora频率，发射功率定义，带宽表定义等，还有id设置，

聊天窗口的交互
按住且往上滚表示发送，按住且往下滚表示删除一个，滚动切换字母（一开始为空的），短按按键表示确认，

<!-- 长按按键切换软件交互窗口
聊天记录窗口的交互
滚动翻动聊天记录
按住且往下滚表示删除聊天记录
 -->

长按按键切换设置按钮，短按确认进入设置页面
滚动切换，短按确认，长按返回


限幅动作，找数据超出

休眠独立看门狗复位，按键无法唤醒
都是重新开机，然后看门狗是断开时钟，按键

低速时钟（LSI）
LSI 是系统内部约 128kHz 的 RC 振荡器产生的低速时钟信号。它可以在停机和待机模式下保持
运行，为 RTC 时钟、独立看门狗和唤醒单元提供时钟基准。进一步信息可参考数据手册的电气特性
部分。LSI 可以通过设置 RCC_RSTSCKR 寄存器中的 LSION 位被启动和关闭，然后通过查询 LSIRDY 位
检测 LSI RC 振荡是否稳定，硬件在

看门狗靠这个时钟，把他失能就不会看门狗复位了，现在是唤醒问题，唤醒不了


 4s喂狗，2s唤醒

 
喂狗必须在while1里面

        开机
        看门狗开
        自动唤醒开
        喂狗
        休眠needsleep==1
        自动唤醒喂狗
        休眠needsleep==1
        自动唤醒喂狗
        休眠needsleep==1
        自动唤醒喂狗
        休眠needsleep==1
        人工唤醒needsleep==0
        自动唤醒喂狗
        人工运行喂狗needsleep==0
        自动唤醒喂狗
        休眠needsleep==1

        while里面判断是否是自动唤醒的状态，是就喂狗，不是跑代码

        if(needsleep==1){
                喂狗+睡觉
        }
        else{
                喂狗+工作

        }


        只刷新一次
        删除信息页面内容

        画矩形太低效了

        聊天记录翻页

           需要验证这个有没有用 Delay_Ms(1);比较耗时3个地方都有

           为什么第一次休眠会乱码


           发送消息出去，需要回应**，发出去的消息结尾要带*

下午2点测续航

第二章，同屏传输
每次变化都发送信息出去，
界面用输入页面，发送按键取消，
接收数据的时候（完整数据旧的是分段的数据），更新数组，
刷新界面到输入栏
删除会发送，变化滚轮也发送，确认也会发送，滚动发送也会发送
确认不算发送，算光标去下一位，滚动的过程自己的会发送


维护一个数组，数组的内容在滚动的时候会改变然后发送，删除的时候，把当前的这位清空,


问题点
充满电不会断电，78%就没了


使用说明
按键会唤醒，中断会唤醒编码器无法唤醒，因为编码器不是中断，确认是不带发送功能的，滚动才带
充电，消息，编码，按键都会震动一下
必须要滚动一下在按确认，先按确认会把第一个位置变成空的


128


20                        |
1                        |
8*12=96 （144字）       |117
不够显示一行            11




21+12=33
21+12*9=120
120+21=141
141+12=153
153+12*9=211



18*8=144个字数


142


最多显示162个字，9行，一行18个字多出来8个像素。



同步收发数据逻辑

A目前有3个字母，B目前有1个字母。
A和B的同步逻辑是：a发送过去，



